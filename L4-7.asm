;Upcount if P3.0 is closed else downcount

ORG 0
MOV DPTR,#TABLE

UPM:MOV A,#0H
UP:
MOV R0,A
MOVC A,@A+DPTR
MOV P1,A
ACALL delay
MOV A,R0
INC A
MOV C,P3.0
JC DOWN
CJNE A,#10H,UP
MOV A,#0H
SJMP UP

DOWNM:MOV A,#0FH
DOWN:
MOV R0,A
MOVC A,@A+DPTR
MOV P1,A
ACALL delay
MOV A,R0
DEC A
MOV C,P3.0
JNC UP
CJNE A,#0H,DOWN
MOV A,#0FH
SJMP DOWN


delay: MOV R2, #01H
here:	DJNZ R2,here
	RET

ORG 0200H
TABLE:db 3FH,06H,5BH,4FH,66H,6DH,7DH,07H,7FH,6FH,77H,7CH,39H,5EH,79H,71H